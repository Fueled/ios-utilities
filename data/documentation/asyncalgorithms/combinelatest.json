{"seeAlsoSections":[{"generated":true,"anchor":"Getting-Started","title":"Getting Started","identifiers":["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AdjacentPairs","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/BufferedBytes","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chain","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Channel","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chunked","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Collections","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Compacted","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Debounce","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Effects","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Intersperse","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Joined","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Lazy","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Merge","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Reductions","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/RemoveDuplicates"]}],"schemaVersion":{"minor":3,"major":0,"patch":0},"identifier":{"url":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/CombineLatest","interfaceLanguage":"swift"},"kind":"article","metadata":{"title":"Combine Latest","role":"article","roleHeading":"Article","modules":[{"name":"AsyncAlgorithms"}]},"primaryContentSections":[{"content":[{"type":"heading","anchor":"overview","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"["},{"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/CombineLatest\/AsyncCombineLatest2Sequence.swift","type":"reference","isActive":true},{"type":"text","text":", "},{"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/CombineLatest\/AsyncCombineLatest3Sequence.swift","type":"reference","isActive":true},{"type":"text","text":" |"},{"type":"text","text":" "},{"identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Tests\/AsyncAlgorithmsTests\/TestCombineLatest.swift","type":"reference","isActive":true},{"type":"text","text":"]"}]},{"type":"codeListing","code":["let appleFeed = URL(\"http:\/\/www.example.com\/ticker?symbol=AAPL\").lines","let nasdaqFeed = URL(\"http:\/\/www.example.com\/ticker?symbol=^IXIC\").lines","","for try await (apple, nasdaq) in combineLatest(appleFeed, nasdaqFeed) {","  print(\"AAPL: \\(apple) NASDAQ: \\(nasdaq)\")","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Given some sample inputs the following combined events can be expected."}]},{"type":"table","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Timestamp"}]}],[{"type":"paragraph","inlineContent":[{"text":"appleFeed","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"nasdaqFeed"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"combined output"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"11:40 AM","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"173.91"}]}],[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[]}]],[[{"type":"paragraph","inlineContent":[{"text":"12:25 AM","type":"text"}]}],[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[{"text":"14236.78","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"text":"AAPL: 173.91 NASDAQ: 14236.78","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"12:40 AM"}]}],[{"type":"paragraph","inlineContent":[]}],[{"inlineContent":[{"text":"14218.34","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"AAPL: 173.91 NASDAQ: 14218.34","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"1:15 PM"}],"type":"paragraph"}],[{"inlineContent":[{"text":"173.00","type":"text"}],"type":"paragraph"}],[{"inlineContent":[],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"AAPL: 173.00 NASDAQ: 14218.34"}]}]]],"header":"row"},{"type":"heading","level":2,"text":"Detailed Design","anchor":"Detailed-Design"},{"type":"paragraph","inlineContent":[{"text":"This function family and the associated family of return types are prime candidates for variadic generics. Until that proposal is accepted, these will be implemented in terms of two- and three-base sequence cases.","type":"text"}]},{"code":["public func combineLatest<Base1: AsyncSequence, Base2: AsyncSequence>(_ base1: Base1, _ base2: Base2) -> AsyncCombineLatest2Sequence<Base1, Base2>","","public func combineLatest<Base1: AsyncSequence, Base2: AsyncSequence, Base3: AsyncSequence>(_ base1: Base1, _ base2: Base2, _ base3: Base3) -> AsyncCombineLatest3Sequence<Base1, Base2, Base3>","","public struct AsyncCombineLatest2Sequence<Base1: AsyncSequence, Base2: AsyncSequence>: Sendable","  where","    Base1: Sendable, Base2: Sendable,","    Base1.Element: Sendable, Base2.Element: Sendable,","    Base1.AsyncIterator: Sendable, Base2.AsyncIterator: Sendable {","  public typealias Element = (Base1.Element, Base2.Element)","","  public struct Iterator: AsyncIteratorProtocol {","    public mutating func next() async rethrows -> Element?","  }","","  public func makeAsyncIterator() -> Iterator","}","","public struct AsyncCombineLatest3Sequence<Base1: AsyncSequence, Base2: AsyncSequence, Base3: AsyncSequence>: Sendable","  where","    Base1: Sendable, Base2: Sendable, Base3: Sendable","    Base1.Element: Sendable, Base2.Element: Sendable, Base3.Element: Sendable","    Base1.AsyncIterator: Sendable, Base2.AsyncIterator: Sendable, Base3.AsyncIterator: Sendable {","  public typealias Element = (Base1.Element, Base2.Element, Base3.Element)","","  public struct Iterator: AsyncIteratorProtocol {","    public mutating func next() async rethrows -> Element?","  }","","  public func makeAsyncIterator() -> Iterator","}",""],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"combineLatest(_:...)"},{"type":"text","text":" function takes two or more asynchronous sequences as arguments and produces an  "},{"type":"codeVoice","code":"AsyncCombineLatestSequence"},{"type":"text","text":" which is an asynchronous sequence."}],"type":"paragraph"},{"inlineContent":[{"text":"Since the bases comprising the ","type":"text"},{"code":"AsyncCombineLatestSequence","type":"codeVoice"},{"text":" must be iterated concurrently to produce the latest value, those sequences must be able to be sent to child tasks. This means that a prerequisite of the bases must be that the base asynchronous sequences, their iterators, and the elements they produce must all be ","type":"text"},{"code":"Sendable","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"If any of the bases terminate before the first element is produced, then the ","type":"text"},{"code":"AsyncCombineLatestSequence","type":"codeVoice"},{"text":" iteration can never be satisfied. So, if a base’s iterator returns ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":" at the first iteration, then the ","type":"text"},{"code":"AsyncCombineLatestSequence","type":"codeVoice"},{"text":" iterator immediately returns ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":" to signify a terminal state. In this particular case, any outstanding iteration of other bases will be cancelled. After the first element is produced ,this behavior is different since the latest values can still be satisfied by at least one base. This means that beyond the construction of the first tuple comprised of the returned elements of the bases, the terminal state of the ","type":"text"},{"code":"AsyncCombineLatestSequence","type":"codeVoice"},{"text":" iteration will only be reached when all of the base iterations reach a terminal state.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The throwing behavior of ","type":"text"},{"type":"codeVoice","code":"AsyncCombineLatestSequence"},{"text":" is that if any of the bases throw, then the composed asynchronous sequence throws on its iteration. If at any point (within the first iteration or afterwards), an error is thrown by any base, the other iterations are cancelled and the thrown error is immediately thrown to the consuming iteration.","type":"text"}],"type":"paragraph"},{"level":3,"anchor":"Naming","type":"heading","text":"Naming"},{"type":"paragraph","inlineContent":[{"text":"Since the inherent behavior of ","type":"text"},{"code":"combineLatest(_:...)","type":"codeVoice"},{"text":" combines the latest values from multiple streams into a tuple the naming is intended to be quite literal. There are precedent terms of art in other frameworks and libraries (listed in the comparison section). Other naming takes the form of “withLatestFrom”. This was disregarded since the “with” prefix is often most associated with the passing of a closure and some sort of contextual concept; ","type":"text"},{"code":"withUnsafePointer","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"withUnsafeContinuation","type":"codeVoice"},{"text":" are prime examples.","type":"text"}]},{"text":"Comparison with other libraries","type":"heading","anchor":"Comparison-with-other-libraries","level":3},{"inlineContent":[{"type":"text","text":"Combine latest often appears in libraries developed for processing events over time since the event ordering of a concept of “latest” only occurs when asynchrony is involved."}],"type":"paragraph"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"ReactiveX"}],"type":"strong"},{"type":"text","text":" ReactiveX has an "},{"identifier":"https:\/\/reactivex.io\/documentation\/operators\/combinelatest.html","type":"reference","isActive":true},{"type":"text","text":" as a top level function for combining Observables."}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Combine"}]},{"text":" Combine has an ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/combine\/publisher\/combinelatest(_:)\/"},{"text":" has an operator style method for combining Publishers.","type":"text"}],"type":"paragraph"}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms"]]},"sections":[],"variants":[{"paths":["\/documentation\/asyncalgorithms\/combinelatest"],"traits":[{"interfaceLanguage":"swift"}]}],"abstract":[{"type":"text","text":"Combines the latest values produced from two or more asynchronous sequences into an asynchronous sequence of tuples."}],"references":{"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/CombineLatest/AsyncCombineLatest3Sequence.swift":{"type":"link","title":"Source","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/CombineLatest\/AsyncCombineLatest3Sequence.swift","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/CombineLatest\/AsyncCombineLatest3Sequence.swift","titleInlineContent":[{"text":"Source","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Chunked":{"title":"Chunked","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chunked","kind":"article","url":"\/documentation\/asyncalgorithms\/chunked","role":"article","type":"topic","abstract":[]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Channel":{"url":"\/documentation\/asyncalgorithms\/channel","type":"topic","title":"Channel","abstract":[],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Channel"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Debounce":{"title":"Debounce","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Debounce","kind":"article","url":"\/documentation\/asyncalgorithms\/debounce","role":"article","type":"topic","abstract":[]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/RemoveDuplicates":{"url":"\/documentation\/asyncalgorithms\/removeduplicates","type":"topic","title":"RemoveDuplicates","abstract":[],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/RemoveDuplicates"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Chain":{"url":"\/documentation\/asyncalgorithms\/chain","type":"topic","title":"Chain","abstract":[{"text":"Chains two or more asynchronous sequences together sequentially.","type":"text"}],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chain"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Compacted":{"title":"Compacted","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Compacted","kind":"article","url":"\/documentation\/asyncalgorithms\/compacted","role":"article","type":"topic","abstract":[]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AdjacentPairs":{"url":"\/documentation\/asyncalgorithms\/adjacentpairs","type":"topic","title":"AdjacentPairs","abstract":[],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AdjacentPairs"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Merge":{"role":"article","abstract":[{"text":"Merges two or more asynchronous sequences sharing the same element type into one singular asynchronous sequence.","type":"text"}],"type":"topic","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Merge","url":"\/documentation\/asyncalgorithms\/merge","kind":"article","title":"Merge"},"https://reactivex.io/documentation/operators/combinelatest.html":{"type":"link","title":"API definition of CombineLatest","identifier":"https:\/\/reactivex.io\/documentation\/operators\/combinelatest.html","url":"https:\/\/reactivex.io\/documentation\/operators\/combinelatest.html","titleInlineContent":[{"text":"API definition of CombineLatest","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/BufferedBytes":{"title":"AsyncBufferedByteIterator","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/BufferedBytes","kind":"article","url":"\/documentation\/asyncalgorithms\/bufferedbytes","role":"article","type":"topic","abstract":[{"type":"text","text":"Provides a highly efficient iterator useful for iterating byte sequences derived from asynchronous read functions."}]},"https://developer.apple.com/documentation/combine/publisher/combinelatest(_:)/":{"url":"https:\/\/developer.apple.com\/documentation\/combine\/publisher\/combinelatest(_:)\/","title":"API definition of combineLatest","identifier":"https:\/\/developer.apple.com\/documentation\/combine\/publisher\/combinelatest(_:)\/","type":"link","titleInlineContent":[{"text":"API definition of combineLatest","type":"text"}]},"https://github.com/apple/swift-async-algorithms/blob/main/Tests/AsyncAlgorithmsTests/TestCombineLatest.swift":{"titleInlineContent":[{"type":"text","text":"Tests"}],"title":"Tests","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Tests\/AsyncAlgorithmsTests\/TestCombineLatest.swift","type":"link","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Tests\/AsyncAlgorithmsTests\/TestCombineLatest.swift"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Effects":{"url":"\/documentation\/asyncalgorithms\/effects","type":"topic","title":"Effects","abstract":[{"text":"Lists the effects of all async algorithms.","type":"text"}],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Effects"},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/CombineLatest/AsyncCombineLatest2Sequence.swift":{"type":"link","title":"Source","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/CombineLatest\/AsyncCombineLatest2Sequence.swift","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/CombineLatest\/AsyncCombineLatest2Sequence.swift","titleInlineContent":[{"text":"Source","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Reductions":{"title":"Reductions","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Reductions","kind":"article","url":"\/documentation\/asyncalgorithms\/reductions","role":"article","type":"topic","abstract":[]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Collections":{"url":"\/documentation\/asyncalgorithms\/collections","type":"topic","title":"Collection Initializers","abstract":[],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Collections"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Lazy":{"title":"AsyncSyncSequence","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Lazy","kind":"article","url":"\/documentation\/asyncalgorithms\/lazy","role":"article","type":"topic","abstract":[{"type":"text","text":"This operation is available for all "},{"type":"codeVoice","code":"Sequence"},{"type":"text","text":" types."}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Joined":{"title":"Joined","url":"\/documentation\/asyncalgorithms\/joined","type":"topic","abstract":[],"kind":"article","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Joined"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms":{"identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms","kind":"symbol","role":"collection","url":"\/documentation\/asyncalgorithms","title":"AsyncAlgorithms","abstract":[{"type":"strong","inlineContent":[{"text":"Swift Async Algorithms","type":"text"}]},{"type":"text","text":" is an open-source package of asynchronous sequence and advanced algorithms that involve concurrency, along with their related types."}],"type":"topic"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Intersperse":{"title":"Intersperse","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Intersperse","kind":"article","url":"\/documentation\/asyncalgorithms\/intersperse","role":"article","type":"topic","abstract":[{"type":"text","text":"Places a given value in between each element of the asynchronous sequence."}]}}}