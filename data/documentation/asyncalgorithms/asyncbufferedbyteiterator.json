{"abstract":[{"type":"text","text":"An "},{"code":"AsyncIterator","type":"codeVoice"},{"type":"text","text":" that provides a convenient and high-performance implementation"},{"type":"text","text":" "},{"type":"text","text":"of a common architecture for "},{"code":"AsyncSequence","type":"codeVoice"},{"type":"text","text":" of "},{"code":"UInt8","type":"codeVoice"},{"text":", otherwise known as byte streams.","type":"text"}],"schemaVersion":{"minor":3,"major":0,"patch":0},"metadata":{"title":"AsyncBufferedByteIterator","symbolKind":"struct","role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AsyncBufferedByteIterator"}],"navigatorTitle":[{"kind":"identifier","text":"AsyncBufferedByteIterator"}],"roleHeading":"Structure","externalID":"s:15AsyncAlgorithms0A20BufferedByteIteratorV","platforms":[{"name":"iOS","introducedAt":"13.0","unavailable":false,"deprecated":false,"beta":false},{"name":"macOS","introducedAt":"10.15","unavailable":false,"deprecated":false,"beta":false},{"name":"tvOS","introducedAt":"13.0","unavailable":false,"deprecated":false,"beta":false},{"name":"watchOS","introducedAt":"6.0","unavailable":false,"deprecated":false,"beta":false}],"modules":[{"name":"AsyncAlgorithms"}]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator"},"relationshipsSections":[{"type":"conformsTo","kind":"relationships","title":"Conforms To","identifiers":["doc:\/\/AsyncAlgorithms\/ScI"]}],"topicSections":[{"anchor":"Initializers","generated":true,"title":"Initializers","identifiers":["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/init(capacity:readFunction:)"]},{"anchor":"Instance-Methods","generated":true,"title":"Instance Methods","identifiers":["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/next()"]},{"anchor":"Type-Aliases","generated":true,"title":"Type Aliases","identifiers":["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/Element"]},{"generated":true,"anchor":"Default-Implementations","title":"Default Implementations","identifiers":["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/AsyncIteratorProtocol-Implementations"]}],"hierarchy":{"paths":[["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms"]]},"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"platforms":["macOS"],"tokens":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AsyncBufferedByteIterator","kind":"identifier"}]}]},{"content":[{"type":"heading","level":2,"anchor":"overview","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Bytes are read into an internal buffer of "},{"type":"codeVoice","code":"capacity"},{"type":"text","text":" bytes via the"},{"type":"text","text":" "},{"type":"codeVoice","code":"readFunction"},{"type":"text","text":". Invoking "},{"type":"codeVoice","code":"next()"},{"type":"text","text":" returns bytes from the internal buffer until itâ€™s"},{"type":"text","text":" "},{"type":"text","text":"empty, and then suspends and awaits another invocation of "},{"type":"codeVoice","code":"readFunction"},{"type":"text","text":" to"},{"type":"text","text":" "},{"text":"refill. If ","type":"text"},{"code":"readFunction","type":"codeVoice"},{"text":" returns 0 (indicating nothing was read), ","type":"text"},{"code":"next()","type":"codeVoice"},{"text":" will","type":"text"},{"text":" ","type":"text"},{"text":"return ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":" from then on. Cancellation is checked before each invocation of","type":"text"},{"text":" ","type":"text"},{"code":"readFunction","type":"codeVoice"},{"text":", which means that many calls to ","type":"text"},{"code":"next()","type":"codeVoice"},{"text":" will not check for","type":"text"},{"text":" ","type":"text"},{"text":"cancellation.","type":"text"}]},{"inlineContent":[{"text":"A typical use of ","type":"text"},{"type":"codeVoice","code":"AsyncBufferedByteIterator"},{"type":"text","text":" looks something like this:"}],"type":"paragraph"},{"syntax":null,"code":["struct AsyncBytes: AsyncSequence {","  public typealias Element = UInt8","  var handle: ReadableThing","","  internal init(_ readable: ReadableThing) {","    handle = readable","  }","","  public func makeAsyncIterator() -> AsyncBufferedByteIterator {","    return AsyncBufferedByteIterator(capacity: 16384) { buffer in","      \/\/ This runs once every 16384 invocations of next()","      return try await handle.read(into: buffer)","    }","  }","}"],"type":"codeListing"}],"kind":"content"}],"sections":[],"variants":[{"paths":["\/documentation\/asyncalgorithms\/asyncbufferedbyteiterator"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"symbol","references":{"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AsyncBufferedByteIterator/AsyncIteratorProtocol-Implementations":{"identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/AsyncIteratorProtocol-Implementations","kind":"article","role":"collectionGroup","url":"\/documentation\/asyncalgorithms\/asyncbufferedbyteiterator\/asynciteratorprotocol-implementations","title":"AsyncIteratorProtocol Implementations","abstract":[],"type":"topic"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AsyncBufferedByteIterator":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AsyncBufferedByteIterator","kind":"identifier"}],"navigatorTitle":[{"text":"AsyncBufferedByteIterator","kind":"identifier"}],"role":"symbol","abstract":[{"text":"An ","type":"text"},{"type":"codeVoice","code":"AsyncIterator"},{"text":" that provides a convenient and high-performance implementation","type":"text"},{"text":" ","type":"text"},{"text":"of a common architecture for ","type":"text"},{"type":"codeVoice","code":"AsyncSequence"},{"text":" of ","type":"text"},{"type":"codeVoice","code":"UInt8"},{"text":", otherwise known as byte streams.","type":"text"}],"type":"topic","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator","url":"\/documentation\/asyncalgorithms\/asyncbufferedbyteiterator","kind":"symbol","title":"AsyncBufferedByteIterator"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms":{"identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms","kind":"symbol","role":"collection","url":"\/documentation\/asyncalgorithms","title":"AsyncAlgorithms","abstract":[{"type":"strong","inlineContent":[{"text":"Swift Async Algorithms","type":"text"}]},{"type":"text","text":" is an open-source package of asynchronous sequence and advanced algorithms that involve concurrency, along with their related types."}],"type":"topic"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AsyncBufferedByteIterator/next()":{"identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/next()","kind":"symbol","role":"symbol","url":"\/documentation\/asyncalgorithms\/asyncbufferedbyteiterator\/next()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"next"},{"kind":"text","text":"() "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"UInt8","preciseIdentifier":"s:s5UInt8V"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Reads a byte out of the buffer if available. When no bytes are available, this will trigger"},{"type":"text","text":" "},{"type":"text","text":"the read function to reload the buffer and then return the next byte from that buffer."}],"type":"topic","title":"next()"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AsyncBufferedByteIterator/init(capacity:readFunction:)":{"identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/init(capacity:readFunction:)","kind":"symbol","role":"symbol","url":"\/documentation\/asyncalgorithms\/asyncbufferedbyteiterator\/init(capacity:readfunction:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"capacity"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"text":", ","kind":"text"},{"text":"readFunction","kind":"externalParam"},{"text":": (","kind":"text"},{"text":"UnsafeMutableRawBufferPointer","kind":"typeIdentifier","preciseIdentifier":"s:Sw"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Int","kind":"typeIdentifier","preciseIdentifier":"s:Si"},{"text":")","kind":"text"}],"title":"init(capacity:readFunction:)","abstract":[{"text":"Creates an asynchronous buffered byte iterator with a specified capacity and read function.","type":"text"}],"type":"topic"},"doc://AsyncAlgorithms/ScI":{"title":"_Concurrency.AsyncIteratorProtocol","identifier":"doc:\/\/AsyncAlgorithms\/ScI","type":"unresolvable"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AsyncBufferedByteIterator/Element":{"navigatorTitle":[{"kind":"identifier","text":"Element"}],"identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AsyncBufferedByteIterator\/Element","kind":"symbol","role":"symbol","url":"\/documentation\/asyncalgorithms\/asyncbufferedbyteiterator\/element","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"Element"}],"title":"AsyncBufferedByteIterator.Element","type":"topic","abstract":[]}}}