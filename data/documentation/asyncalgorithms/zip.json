{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Zip"},"metadata":{"role":"article","roleHeading":"Article","modules":[{"name":"AsyncAlgorithms"}],"title":"Zip"},"abstract":[{"text":"Combines the latest values produced from two or more asynchronous sequences into an asynchronous sequence of tuples.","type":"text"}],"seeAlsoSections":[{"identifiers":["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AdjacentPairs","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/BufferedBytes","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chain","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Channel","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chunked","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Collections","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/CombineLatest","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Compacted","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Debounce","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Effects","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Intersperse","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Joined","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Lazy","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Merge","doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Reductions"],"title":"Getting Started","anchor":"Getting-Started","generated":true}],"schemaVersion":{"minor":3,"patch":0,"major":0},"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"type":"text","text":"["},{"type":"reference","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/Zip\/AsyncZip2Sequence.swift","isActive":true},{"type":"text","text":", "},{"type":"reference","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/Zip\/AsyncZip3Sequence.swift","isActive":true},{"type":"text","text":" |"},{"type":"text","text":" "},{"type":"reference","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Tests\/AsyncAlgorithmsTests\/TestZip.swift","isActive":true},{"type":"text","text":"]"}],"type":"paragraph"},{"syntax":"swift","code":["let appleFeed = URL(string: \"http:\/\/www.example.com\/ticker?symbol=AAPL\")!.lines","let nasdaqFeed = URL(string: \"http:\/\/www.example.com\/ticker?symbol=^IXIC\")!.lines","","for try await (apple, nasdaq) in zip(appleFeed, nasdaqFeed) {","  print(\"APPL: \\(apple) NASDAQ: \\(nasdaq)\")","}"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Given some sample inputs the following zipped events can be expected."}],"type":"paragraph"},{"header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Timestamp"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"appleFeed"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"nasdaqFeed"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"combined output"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"11:40 AM"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"173.91"}]}],[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"12:25 AM"}]}],[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"14236.78"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"AAPL: 173.91 NASDAQ: 14236.78"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"12:40 AM"}]}],[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"14218.34"}]}],[{"type":"paragraph","inlineContent":[]}]],[[{"type":"paragraph","inlineContent":[{"type":"text","text":"1:15 PM"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"173.00"}]}],[{"type":"paragraph","inlineContent":[]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"AAPL: 173.00 NASDAQ: 14218.34"}]}]]],"type":"table"},{"anchor":"Detailed-Design","level":2,"text":"Detailed Design","type":"heading"},{"inlineContent":[{"type":"text","text":"This function family and the associated family of return types are prime candidates for variadic generics. Until that proposal is accepted, these will be implemented in terms of two- and three-base sequence cases."}],"type":"paragraph"},{"syntax":"swift","code":["public func zip<Base1: AsyncSequence, Base2: AsyncSequence>(_ base1: Base1, _ base2: Base2) -> AsyncZip2Sequence<Base1, Base2>","","public func zip<Base1: AsyncSequence, Base2: AsyncSequence, Base3: AsyncSequence>(_ base1: Base1, _ base2: Base2, _ base3: Base3) -> AsyncZip3Sequence<Base1, Base2, Base3>","","public struct AsyncZip2Sequence<Base1: AsyncSequence, Base2: AsyncSequence>: Sendable","  where","    Base1: Sendable, Base2: Sendable,","    Base1.Element: Sendable, Base2.Element: Sendable,","    Base1.AsyncIterator: Sendable, Base2.AsyncIterator: Sendable {","  public typealias Element = (Base1.Element, Base2.Element)","","  public struct Iterator: AsyncIteratorProtocol {","    public mutating func next() async rethrows -> Element?","  }","","  public func makeAsyncIterator() -> Iterator","}","","public struct AsyncZip3Sequence<Base1: AsyncSequence, Base2: AsyncSequence, Base3: AsyncSequence>: Sendable","  where","    Base1: Sendable, Base2: Sendable, Base3: Sendable","    Base1.Element: Sendable, Base2.Element: Sendable, Base3.Element: Sendable","    Base1.AsyncIterator: Sendable, Base2.AsyncIterator: Sendable, Base3.AsyncIterator: Sendable {","  public typealias Element = (Base1.Element, Base2.Element, Base3.Element)","","  public struct Iterator: AsyncIteratorProtocol {","    public mutating func next() async rethrows -> Element?","  }","","  public func makeAsyncIterator() -> Iterator","}",""],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"zip(_:...)"},{"type":"text","text":" function takes two or more asynchronous sequences as arguments with the resulting "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" which is an asynchronous sequence."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Each iteration of an "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" will await for all base iterators to produce a value. This iteration will be done concurrently to produce a singular tuple result. If any of the base iterations terminates by returning "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" from its iteration, the "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" iteration is immediately considered unsatisfiable and returns "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" and all iterations of other bases will be cancelled. If any iteration of the bases throws an error, then the other iterations concurrently running are cancelled and the produced error is rethrown, terminating the iteration."}],"type":"paragraph"},{"inlineContent":[{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" requires that the iterations are done concurrently. This means that the base sequences, their elements, and iterators must all be "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":". That makes "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" inherently "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The source of throwing of "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" is determined by its bases. That means that if any base can throw an error then the iteration of the "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" can throw. If no bases can throw, then the "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" does not throw."}],"type":"paragraph"},{"anchor":"Naming","level":3,"text":"Naming","type":"heading"},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"zip(_:...)"},{"type":"text","text":" function takes its name from the Swift standard library function of the same name. The "},{"type":"codeVoice","code":"AsyncZipSequence"},{"type":"text","text":" family of types take their name from the same family from the standard library for the type returned by "},{"type":"codeVoice","code":"zip(_:_:)"},{"type":"text","text":". The one difference is that this asynchronous version allows for the affordance of recognizing the eventual variadic generic need of expanding a zip of more than just two sources."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"It is common in some libraries to have a "},{"type":"codeVoice","code":"ZipMap"},{"type":"text","text":" or some other combination of "},{"type":"codeVoice","code":"zip"},{"type":"text","text":" and "},{"type":"codeVoice","code":"map"},{"type":"text","text":". This is a common usage pattern, but leaving a singular type for composition feels considerably more approachable."}],"type":"paragraph"},{"anchor":"Comparison-with-other-libraries","level":3,"text":"Comparison with other libraries","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Swift"}]},{"type":"text","text":" The swift standard library has an "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/1541125-zip","isActive":true},{"type":"text","text":" as a top level function for combining two sequences."}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"ReactiveX"}]},{"type":"text","text":" ReactiveX has an "},{"type":"reference","identifier":"https:\/\/reactivex.io\/documentation\/operators\/zip.html","isActive":true},{"type":"text","text":" as a top level function for combining Observables."}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Combine"}]},{"type":"text","text":" Combine has an "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/combine\/publisher\/zip(_:)\/","isActive":true},{"type":"text","text":" as an operator style method for combining Publishers."}],"type":"paragraph"}]}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/asyncalgorithms\/zip"]}],"sections":[],"kind":"article","hierarchy":{"paths":[["doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms"]]},"references":{"https://github.com/apple/swift-async-algorithms/blob/main/Tests/AsyncAlgorithmsTests/TestZip.swift":{"title":"Tests","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Tests\/AsyncAlgorithmsTests\/TestZip.swift","type":"link","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Tests\/AsyncAlgorithmsTests\/TestZip.swift","titleInlineContent":[{"text":"Tests","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms":{"type":"topic","abstract":[{"type":"strong","inlineContent":[{"type":"text","text":"Swift Async Algorithms"}]},{"type":"text","text":" is an open-source package of asynchronous sequence and advanced algorithms that involve concurrency, along with their related types."}],"title":"AsyncAlgorithms","kind":"symbol","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms","role":"collection","url":"\/documentation\/asyncalgorithms"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Reductions":{"title":"Reductions","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Reductions","url":"\/documentation\/asyncalgorithms\/reductions","abstract":[],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Channel":{"title":"Channel","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Channel","url":"\/documentation\/asyncalgorithms\/channel","abstract":[],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Effects":{"title":"Effects","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Effects","url":"\/documentation\/asyncalgorithms\/effects","abstract":[{"type":"text","text":"Lists the effects of all async algorithms."}],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Debounce":{"title":"Debounce","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Debounce","url":"\/documentation\/asyncalgorithms\/debounce","abstract":[],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/AdjacentPairs":{"title":"AdjacentPairs","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/AdjacentPairs","url":"\/documentation\/asyncalgorithms\/adjacentpairs","abstract":[],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/CombineLatest":{"title":"Combine Latest","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/CombineLatest","url":"\/documentation\/asyncalgorithms\/combinelatest","abstract":[{"type":"text","text":"Combines the latest values produced from two or more asynchronous sequences into an asynchronous sequence of tuples."}],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Lazy":{"title":"AsyncSyncSequence","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Lazy","url":"\/documentation\/asyncalgorithms\/lazy","abstract":[{"type":"text","text":"This operation is available for all "},{"code":"Sequence","type":"codeVoice"},{"type":"text","text":" types."}],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/BufferedBytes":{"title":"AsyncBufferedByteIterator","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/BufferedBytes","url":"\/documentation\/asyncalgorithms\/bufferedbytes","abstract":[{"type":"text","text":"Provides a highly efficient iterator useful for iterating byte sequences derived from asynchronous read functions."}],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Intersperse":{"title":"Intersperse","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Intersperse","url":"\/documentation\/asyncalgorithms\/intersperse","abstract":[{"type":"text","text":"Places a given value in between each element of the asynchronous sequence."}],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Merge":{"title":"Merge","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Merge","url":"\/documentation\/asyncalgorithms\/merge","abstract":[{"type":"text","text":"Merges two or more asynchronous sequences sharing the same element type into one singular asynchronous sequence."}],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Joined":{"title":"Joined","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Joined","url":"\/documentation\/asyncalgorithms\/joined","abstract":[],"kind":"article"},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Compacted":{"title":"Compacted","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Compacted","url":"\/documentation\/asyncalgorithms\/compacted","abstract":[],"kind":"article"},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/Zip/AsyncZip2Sequence.swift":{"title":"Source","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/Zip\/AsyncZip2Sequence.swift","type":"link","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/Zip\/AsyncZip2Sequence.swift","titleInlineContent":[{"text":"Source","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Chain":{"title":"Chain","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chain","url":"\/documentation\/asyncalgorithms\/chain","abstract":[{"type":"text","text":"Chains two or more asynchronous sequences together sequentially."}],"kind":"article"},"https://github.com/apple/swift-async-algorithms/blob/main/Sources/AsyncAlgorithms/Zip/AsyncZip3Sequence.swift":{"title":"Source","url":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/Zip\/AsyncZip3Sequence.swift","type":"link","identifier":"https:\/\/github.com\/apple\/swift-async-algorithms\/blob\/main\/Sources\/AsyncAlgorithms\/Zip\/AsyncZip3Sequence.swift","titleInlineContent":[{"text":"Source","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Collections":{"title":"Collection Initializers","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Collections","url":"\/documentation\/asyncalgorithms\/collections","abstract":[],"kind":"article"},"https://reactivex.io/documentation/operators/zip.html":{"title":"API definition of Zip","url":"https:\/\/reactivex.io\/documentation\/operators\/zip.html","type":"link","identifier":"https:\/\/reactivex.io\/documentation\/operators\/zip.html","titleInlineContent":[{"text":"API definition of Zip","type":"text"}]},"https://developer.apple.com/documentation/combine/publisher/zip(_:)/":{"title":"API definition of zip","url":"https:\/\/developer.apple.com\/documentation\/combine\/publisher\/zip(_:)\/","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/combine\/publisher\/zip(_:)\/","titleInlineContent":[{"text":"API definition of zip","type":"text"}]},"https://developer.apple.com/documentation/swift/1541125-zip":{"title":"API definition of zip","url":"https:\/\/developer.apple.com\/documentation\/swift\/1541125-zip","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/swift\/1541125-zip","titleInlineContent":[{"text":"API definition of zip","type":"text"}]},"doc://AsyncAlgorithms/documentation/AsyncAlgorithms/Chunked":{"title":"Chunked","type":"topic","role":"article","identifier":"doc:\/\/AsyncAlgorithms\/documentation\/AsyncAlgorithms\/Chunked","url":"\/documentation\/asyncalgorithms\/chunked","abstract":[],"kind":"article"}}}